<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Network centrality by alexrutherford</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Network centrality</h1>
        <p>A tutorial on using Python to visualise a city network and to calculate the eigenvector centrality using a random walk.</p>

        <p class="view"><a href="https://github.com/alexrutherford/network_centrality">View the Project on GitHub <small>alexrutherford/network_centrality</small></a></p>


        <ul>
          <li><a href="https://github.com/alexrutherford/network_centrality/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/alexrutherford/network_centrality/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/alexrutherford/network_centrality">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a name="data-science" class="anchor" href="#data-science"><span class="octicon octicon-link"></span></a>Data Science</h3>

<h2>
<a name="a-tutorial-on-network-centrality-and-mapping-in-python-and-r" class="anchor" href="#a-tutorial-on-network-centrality-and-mapping-in-python-and-r"><span class="octicon octicon-link"></span></a>A Tutorial on Network Centrality and Mapping in Python and R</h2>

<h1>
<a name="1-pre-requisites" class="anchor" href="#1-pre-requisites"><span class="octicon octicon-link"></span></a>1 Pre-Requisites</h1>

<p>This tutorial will rely on knowledge of
1. Markov chains
2. Eigenvectors (intuitive understanding and power iteration method)
3. Familiarity with Google’s pageRank algorithm will be useful (see e.g. [1])
4. Having read the following papers before will also help your understanding [2–4]</p>

<h1>
<a name="2-the-general-idea" class="anchor" href="#2-the-general-idea"><span class="octicon octicon-link"></span></a>2 The General Idea</h1>

<p>We will examine flows of air traffic between the major global cities (more precisely Metropolitan Statis- tical Areas1). The global air traffic network is a very interesting network to study; a nice survey can be found here [2]. In this paper [3] it was found that the flow of Twitter communications between cities correlates well with air traffic flows between those same cities. Intuitively this makes sense; if 2 cities have the same principal language then its inhabitants are more likely to follow each other on Twitter and there are more likely to be air connections between the cities to facilitate trade and business.
In this paper that came out of SCAILab [4] we used this idea to show how people spreading news of the Tag challenge made a strong effort to route the message to the tag cities compared to simply broad- casting to all of their friends at random and hoping that the message would reach the target cities. We will reproduce this work using Python to perform random walks on the network and finally produce a nice map using R.</p>

<h1>
<a name="3-the-adjacency-matrix" class="anchor" href="#3-the-adjacency-matrix"><span class="octicon octicon-link"></span></a>3 The Adjacency Matrix</h1>

<p>We will start off by reading in the adjacency matrix between the cities as stored in ADJACENCY.dat (this is a NumPy array stored as a binary object). This matrix is row-normalised so each row sums to 1. In other words if city A has 100 flights leaving from it and 50 of these go to city B, 25 go to city C and 25 go to city D, the weights will be (A,B)=0.5, (A,C)=0.25 and (A,D)=0.25; the weight between i and j is the proportion of the total flights leaving i which depart for j. Note that each node in this network is a city and not an airport, for example London has several airports; Heathrow, Stanstead and Luton. These airports are all grouped together and any flight leaving from them are grouped under the London node.
First of all let us read in the file and plot the connections as a heat map.</p>

<div class="highlight highlight-python"><pre><span class="kn">import</span> <span class="nn">pickle</span>
<span class="c"># This is used for quick reading/writing of Python objects as binary import numpy as np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">adjacency</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">'ADJACENCY.dat'</span><span class="p">,</span><span class="s">'r'</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">adjacency</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p>This gives us the basic heatmap of connections below.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/alexrutherford">alexrutherford</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>